/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{toConst as t}from"./compilerUtils.js";import n from"./RandomLCG.js";const e=1.5,r=1/e,o=.5;function l(t,n){if(!n)return t;for(const e of n)t.push(e);return t}function u(t){return t}function f(t,n=u){if(!t||0===t.length)return;let e=t[0],r=n(e);for(let o=1;o<t.length;++o){const l=t[o],u=Number(n(l));u>r&&(r=u,e=l)}return e}function i(t,n=u){return f(t,(t=>-n(t)))}function c(t,n){return n?t.filter(((t,e,r)=>r.findIndex(n.bind(null,t))===e)):Array.from(new Set(t))}function s(t,n,e,r,o,l,u){if(null==t&&null==r)return!0;n=Math.max(0,n),o=Math.max(0,o),e=Math.max(0,e<0?(t?.length??0)+e:e),l=Math.max(0,l<0?(r?.length??0)+l:l);const f=e-n;if(null==t||null==r||f!==l-o)return!1;if(u){for(let i=0;i<f;i++)if(!u(t[n+i],r[o+i]))return!1}else for(let i=0;i<f;i++)if(t[n+i]!==r[o+i])return!1;return!0}function h(t,n,e){return s(t,0,t?.length??0,n,0,n?.length??0,e)}function a(t,n){let e=t.length!==n.length;e&&(t.length=n.length);for(let r=0;r<n.length;++r)t[r]!==n[r]&&(t[r]=n[r],e=!0);return e}function d(t,n,e){let r,o;return e?(r=n.filter((n=>!t.some((t=>e(t,n))))),o=t.filter((t=>!n.some((n=>e(n,t)))))):(r=n.filter((n=>!t.includes(n))),o=t.filter((t=>!n.includes(t)))),{added:r,removed:o}}function g(t,n,e){return t&&n?e?t.filter((t=>n.findIndex((n=>e(t,n)))>-1)):t.filter((t=>n.includes(t))):[]}function m(t){return t&&"number"==typeof t.length}function p(t,n){const e=t.length;if(0===e)return[];const r=[];for(let o=0;o<e;o+=n)r.push(t.slice(o,o+n));return r}function M(t,n){void 0===n&&(n=t,t=0);const e=new Array(n-t);for(let r=t;r<n;r++)e[r-t]=r;return e}function x(t,n,e){const r=t.length;let o=0,l=r-1;for(;o<l;){const e=o+Math.floor((l-o)/2);n>t[e]?o=e+1:l=e}const u=t[o];return e?n>=t[r-1]?-1:u===n?o:o-1:u===n?o:-1}class w{constructor(){this.last=0}}const b=new w;function y(t,n,e,r){r=r||b;const o=Math.max(0,r.last-10);for(let u=o;u<e;++u)if(t[u]===n)return r.last=u,u;const l=Math.min(o,e);for(let u=0;u<l;++u)if(t[u]===n)return r.last=u,u;return-1}function S(n,e,r,o){const l=r??n.length,u=y(n,t(e),l,o);if(-1!==u)return n[u]=n[l-1],null==r&&n.pop(),e}const j=new Set;function v(t,n,e=t.length,r=n.length,o,l){if(0===r||0===e)return e;j.clear();for(let f=0;f<r;++f)j.add(n[f]);o=o||b;const u=Math.max(0,o.last-10);for(let f=u;f<e;++f)if(j.has(t[f])&&(l?.push(t[f]),j.delete(t[f]),t[f]=t[e-1],--e,--f,0===j.size||0===e))return j.clear(),e;for(let f=0;f<u;++f)if(j.has(t[f])&&(l?.push(t[f]),j.delete(t[f]),t[f]=t[e-1],--e,--f,0===j.size||0===e))return j.clear(),e;return j.clear(),e}function z(t,n){let e=0;for(let r=0;r<t.length;++r){const o=t[r];n(o,r)&&(t[e]=o,e++)}t.length=e}function A(t,n,e){const r=t.length;if(n>=r)return t.slice();const o=I(e),l=new Set,u=[];for(;u.length<n;){const n=Math.floor(o()*r);l.has(n)||(l.add(n),u.push(t[n]))}return u}function I(t){return t?(C.seed=t,()=>C.getFloat()):Math.random}const C=new n;function F(t,n){if(!t)return t;const e=I(n);for(let r=t.length-1;r>0;r--){const n=Math.floor(e()*(r+1)),o=t[r];t[r]=t[n],t[n]=o}return t}function G(t,n){const e=t.indexOf(n);return-1!==e?(t.splice(e,1),n):null}function L(t,n){return null!=t}function N(t,...n){for(const e of n)null!=e&&t.push(e);return t.length}function O(t,n){return t.reduce(((t,e)=>n(e)?t+1:t),0)}const R=[];export{w as PositionHint,l as addMany,x as binaryIndexOf,O as countIf,d as difference,R as emptyArray,h as equals,z as filterInPlace,I as getRandomNumberGenerator,y as indexOf,g as intersect,m as isArrayLike,L as isSome,f as max,i as min,A as pickRandom,N as pushIfSome,M as range,e as reallocGrowthFactor,r as reallocShrinkFactor,o as reallocShrinkThreshold,G as remove,S as removeUnordered,v as removeUnorderedMany,F as shuffle,s as sliceEquals,p as splitIntoChunks,c as unique,a as update};
