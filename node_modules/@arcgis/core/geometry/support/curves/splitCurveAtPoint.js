/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{closestPointsOnBezierCurve as t,splitBezierCurve as i}from"./bezierCurveUtils.js";import{closestPointOnCircle as r}from"./circleUtils.js";import{deriveCircleFromCircularArc as n,splitCircularArc as o}from"./circularArcUtils.js";import{isBezierCurve as s,isCircularArc as c,isEllipticArc as e,isEllipticArc4 as u,cloneCurve as f}from"./curveUtils.js";import{deriveCircleFromEllipticArc4 as l,splitEllipticArc4 as m}from"./ellipticArc4Utils.js";import{deriveEllipse as p,closestPointOnEllipse as a,splitEllipticArc7 as d}from"./ellipticArc7Utils.js";const j=1e-6;function U(r,n,o,s){const c=t(r,n,o).filter((({distance:t})=>t<=s)),e=[];let u=0,f=n;for(const{t}of c){const n=(t-u)/(1-u);if(n<j||1-n<j)continue;const[o,s]=i(r,f,t);e.push(o),f=s,u=t}return e.push(f),e}function v(t,i,s,c){const e=n(t,i);if(e.isInvalid)return[f(i)];const{t:u,distance:l}=r(e,s);return l<=c?o(e,i,u):[f(i)]}function A(t,i,n,o){const s=l(t,i);if(s.isInvalid)return[f(i)];const{t:c,distance:e}=r(s,n);return e<=o?m(s,i,c):[f(i)]}function I(t,i,r,n){const o=p(t,i);if(o.isInvalid)return[f(i)];const{t:s,distance:c}=a(o,r);return c<=n?d(o,i,s):[f(i)]}function h(t,i,r,n){return s(i)?U(t,i,r,n):c(i)?v(t,i,r,n):e(i)?u(i)?A(t,i,r,n):I(t,i,r,n):[f(i)]}export{h as splitCurveAtPoint};
