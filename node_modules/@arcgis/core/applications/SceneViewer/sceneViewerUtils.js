/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import e from"../../core/Collection.js";import r from"../../core/Error.js";import o from"../../core/Logger.js";import{isHostedAgolService as t}from"../../layers/support/arcgisLayerUrl.js";import{registerLoader as n}from"../../layers/support/schemaValidatorLoader.js";import{schemaValidationErrorName as i}from"../../support/webSceneUtils.js";import{renderSVG as a}from"../../symbols/support/svgUtils.js";import{viewingModeFromString as p}from"../../views/ViewingMode.js";import{ZoomControllerGlobal as s}from"../../views/3d/state/controllers/ZoomControllerGlobal.js";import{ZoomControllerLocal as u}from"../../views/3d/state/controllers/ZoomControllerLocal.js";import{TilingScheme as c}from"../../views/3d/terrain/TilingScheme.js";import{isSpatialReferenceSupported as l}from"../../views/support/spatialReferenceSupport.js";import{registerLoader as f}from"../../webscene/support/schemaValidatorLoader.js";function m(r,{defaultSpatialReference:o,isSpatialReferenceSupported:t,priorityLayers:n,required:i}){const a={...r.defaultsFromMapSettings};o&&(a.defaultSpatialReference=o),t&&(a.getSpatialReferenceSupport=(e,o)=>t(e,o)?r.getSpatialReferenceSupport(e,o):null),n&&(a.priorityCollection={layers:new e(n)}),i&&(a.required=i),r.defaultsFromMapSettings=a}function d(e){return e.back()}function y(e){return e.hasPendingEdits}function g(e,r){return o.getLogger("sceneViewer.appState.saveState").warn(e,r)}function h(e){return t(e)}function S(e,r,o,t){return a(e,r,o,t)}function w(e){return!e.canNotSaveAs()}function j(e,r){return l(e,p(r))}function L(e,r){return e.getCompatibleForVTL(r)}function F(e){return new c(e)}function b(e){return null==c.checkUnsupported(e)}function v(){n((()=>import("../../layers/support/schemaValidator.js"))),f((()=>import("../../webscene/support/schemaValidator.js")))}function C(e){return e&&e.name===i}function G(e){const r=e.state.cameraController;return r instanceof s||r instanceof u?r.dragBeginPoint:null}function P(e){e.openedLayers.pop()}function V(e,o){return e&&"fetchPopupFeaturesFromGraphics"in e&&"function"==typeof e.fetchPopupFeaturesFromGraphics?e.fetchPopupFeaturesFromGraphics(o):Promise.reject(new r("layerview:fetchPopupFeaturesFromGraphics","The input layerview does not support fetchPopupFeaturesFromGraphics"))}function R(e){if(!e?.sourceLayer)return null;if("building-component"===e.sourceLayer.type)return e.sourceLayer;throw new r("getSourceLayerFromBuildingComponentSublayerGraphic","The input graphic source layer is not of type BuildingComponentSublayer")}function B(e,o){if(e){if("building-component"!==o?.type)throw new r("setSourceLayerOfBuildingComponentSublayerGraphic","The input source layer is not of type BuildingComponentSublayer");e.sourceLayer=o}}export{w as canSaveAs,P as closeCatalogLayer,F as createTilingScheme,y as editorHasPendingEdits,d as editorNavigateBack,V as fetchPopupFeaturesFromGraphics,L as getCompatibleTileInfoForVTL,R as getSourceLayerFromBuildingComponentSublayerGraphic,v as initializeSchemaValidators,h as isHostedAgolServiceUrl,C as isSchemaValidationError,j as isSpatialReferenceSupported,b as isSupportedTileInfo,S as renderSVG,g as saveStateWarning,m as setDefaultsFromMapSettings,B as setSourceLayerOfBuildingComponentSublayerGraphic,G as zoomDragBeginPoint};
