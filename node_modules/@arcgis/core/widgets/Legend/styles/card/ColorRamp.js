/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../chunks/tslib.es6.js";import{property as t}from"../../../../core/accessorSupport/decorators/property.js";import"../../../../core/has.js";import"../../../../core/Logger.js";import"../../../../core/RandomLCG.js";import{subclass as r}from"../../../../core/accessorSupport/decorators/subclass.js";import{renderSVG as s}from"../../../../symbols/support/svgUtils.js";import{getCSSFilterFromEffectList as o}from"../../../../symbols/support/utils.js";import i from"../../../Widget.js";import{css as l}from"./css.js";import{getRampStopLabel as p}from"../support/utils.js";import"../../../support/widgetUtils.js";import{tsx as a}from"../../../support/jsxFactory.js";const n=25,m=25,c=100;let d=class extends i{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return a("div",{class:this.classes(l.layerRow,l.colorRampContainer)},this._renderRampLabel(e[0]),a("div",{class:l.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:t}=this,r="heatmap-ramp"===this.legendElement.type,i=e.length-1,l=m,p=i>2&&!r?n*i:c,d=p+20,h=10,y=[[{shape:{type:"path",path:`M0 ${l/2} L${h} 0 L${h} ${l} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:h,y:0,width:p,height:l},fill:{type:"linear",x1:h,y1:0,x2:p+h,y2:0,colors:e.map(((e,t)=>({color:e.color,offset:r&&"ratio"in e?e.ratio:t/i})))},stroke:{width:0}},{shape:{type:"path",path:`M${p+h} 0 L${d} ${l/2} L${p+h} ${l} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],f=s(y,d,l),u={filter:o(this.effectList)??void 0,opacity:null==t?void 0:`${t}`};return a("div",{styles:u},f)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?a("div",{class:l.intervalSeparatorsContainer},a("div",{class:l.intervalSeparator},"|"),this._renderRampLabel(t)):null}_renderRampLabel(e){return a("div",{class:l.rampLabel},p(e,this.legendElement.type,this.messages))}};e([t()],d.prototype,"effectList",void 0),e([t()],d.prototype,"legendElement",void 0),e([t()],d.prototype,"messages",void 0),e([t()],d.prototype,"opacity",void 0),d=e([r("esri.widgets.Legend.styles.card.ColorRamp")],d);export{d as default};
