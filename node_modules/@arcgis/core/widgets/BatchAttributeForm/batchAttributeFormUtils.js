/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import"../../intl.js";import{neverReached as i}from"../../core/compilerUtils.js";import{DomainValidationError as t}from"../../layers/support/domainUtils.js";import{NumericRangeValidationError as e,TypeValidationError as r}from"../../layers/support/fieldUtils.js";import{ReactiveGraphic as n}from"./ReactiveGraphic.js";import{InputVisibilityCode as o,MultiFeatureError as s}from"./inputs/support/inputUtils.js";import{getIntlOptionsForField as l}from"../support/dateUtils.js";import{InputValidationError as a,getRangeErrorMessage as I,shouldUseScientificNotation as u,scientificNumberFormatOptions as _,numberFormatOptions as E}from"../support/forms/formUtils.js";import{substitute as p}from"../../intl/substitute.js";const c=(i,t)=>null!=i&&i.input?.type===t;function m(i){return new n({source:i})}function f(i,n,o,c){const{dataType:m,minLength:f}=i,N=o?.validationErrors;if(!N||!n)return null;if(n===s.DIFFERENT_ERRORS)return N.invalidBatchFormType;if(n===a.CANNOT_BE_EMPTY)return N.cannotBeNull;if(n===t.VALUE_OUT_OF_RANGE||n===e.OUT_OF_RANGE){const{field:t,range:e}=i,r={type:"date",intlOptions:{timeZone:"date"===t.type&&c?c:void 0,...l(t)}},n=I(e,N);return p(n,e,{format:{max:"date"===m?r:null!=e.max&&u(e.max)?_:E,min:"date"===m?r:null!=e.min&&u(e.min)?_:E}})}return n===t.INVALID_CODED_VALUE?N.invalidCodedValue:n===r.INVALID_TYPE?N.invalidType:n===a.TOO_SHORT?p(N.tooShort,{min:f}):(a.TOO_LONG,null)}function N(t,e,r){const n=r?.validationErrors;if(!n)return null;let s=null;for(const l of t.invalidHiddenInputs)switch(l.effectiveVisibilityCode){case o.HIDDEN_VISIBILITY_EXPRESSION_ALL:case o.HIDDEN_GROUP_VISIBILITY_EXPRESSION_ALL:case o.HIDDEN_FIELD_DEFINITION:return"single"===e?n.nonVisibleError_changeValues:n.nonVisibleError_checkIndividualFeatures;case o.HIDDEN_NO_DOMAIN_IN_COMMON:case o.HIDDEN_VISIBILITY_EXPRESSION_SOME:case o.HIDDEN_GROUP_VISIBILITY_EXPRESSION_SOME:case o.HIDDEN_NOT_IN_ALL_LAYERS:s=n.nonVisibleError_checkIndividualFeatures;break;case o.VISIBLE:continue;default:i(l.effectiveVisibilityCode)}return s}export{m as createReactiveGraphic,N as getHiddenFieldsValidationErrorMessage,f as getVisibleFieldInputValidationErrorMessage,c as isElementTemplateWithInputType};
