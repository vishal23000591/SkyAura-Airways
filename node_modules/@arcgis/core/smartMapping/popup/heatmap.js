/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import e from"../../PopupTemplate.js";import r from"../../core/Error.js";import{fetchMessageBundle as a}from"../../intl/messages.js";import{getFieldAndExpressionInfos as t,getContentFromFieldInfos as n}from"./support/utils.js";async function o(e){const{layer:a,renderer:t}=e;await a.load();const n=t??("renderer"in a?a.renderer:void 0);if("heatmap"!==n?.type)throw new r("heatmap-popup:invalid-parameters","renderer.type must be 'heatmap'");return{layer:a,renderer:n}}async function i(r){const[{renderer:i,layer:p},s]=await Promise.all([o(r),a("esri/smartMapping/t9n/smartMapping")]);if(!i.field)return null;const{fieldInfos:m}=await t({renderer:i,layer:p}),l=new e({content:await n(p,{fieldInfos:m}),fieldInfos:m});return{primaryTemplate:{name:"heatmap",title:s.heatmap,value:l},secondaryTemplates:[]}}export{i as getTemplates};
