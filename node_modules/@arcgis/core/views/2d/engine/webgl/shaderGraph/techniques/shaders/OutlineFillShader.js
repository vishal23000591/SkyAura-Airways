/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{_ as t,a as o}from"../../../../../../../chunks/tslib.es6.js";import{location as i,uniform as e,option as r,input as s}from"../../GraphShaderModule.js";import{greaterThan as a,Float as l,ifElse as p,Vec3 as n,Vec4 as u,Vec2 as m}from"../../graph/glsl.js";import{AFeatureShader as d,BaseHittestVertexInput as c,FeatureVertexInput as f}from"./AFeatureShader.js";import{bitsetTypeFillOutline as y,bitsetOutlineUsesColorVV as h}from"./constants.js";import{hittestFill as v,failHittest as V}from"./hittestUtils.js";import{getLineFragmentColor as S,getLineVertexData as b,AntialiasingControls as j,LineFragmentInput as x}from"./LineShader.js";import{getBit as g,getBitBool as w}from"./utils.js";import{VisualVariableColor as z}from"./VisualVariableColor.js";import{VisualVariableOpacity as M}from"./VisualVariableOpacity.js";import{VisualVariableSizeMinMaxValue as O}from"./VisualVariableSizeMinMaxValue.js";import{VisualVariableSizeScaleStops as C}from"./VisualVariableSizeScaleStops.js";import{VisualVariableSizeStops as P}from"./VisualVariableSizeStops.js";import{VisualVariableSizeUnitValue as U}from"./VisualVariableSizeUnitValue.js";import{getVisualVariableOpacity as W,getVisualVariableColor as F}from"./vvUtils.js";class R extends f{}t([i(3,m)],R.prototype,"offset",void 0),t([i(4,u)],R.prototype,"color",void 0),t([i(5,m)],R.prototype,"normal",void 0),t([i(6,l)],R.prototype,"halfWidth",void 0),t([i(7,l)],R.prototype,"referenceHalfWidth",void 0),t([i(8,m)],R.prototype,"zoomRange",void 0);class A extends x{}function H(t,o,i){const{id:e,bitset:r}=o,s=g(r,y),m=a(s,new l(.5)),d=b(t,o),c=p(m,d.halfWidth,new l(0)),f=W(t,e),v=F(t,e,o.color),V=p(m,p(w(r,h),v,o.color),v.multiply(f)),S=t.view.displayViewScreenMat3.multiply(new n(o.pos.xy,1)),j=t.clip(o.id),x=new u(S.xy,j,1),z=p(m,d.glPosition,x),M=i&&t.maybeRunHittest(o,i,m);return{isOutline:s,color:V,opacity:new l(1),halfWidth:c,normal:d.normal,glPosition:z,...M}}class k extends d{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}t([e(j)],k.prototype,"antialiasingControls",void 0),t([r(z)],k.prototype,"visualVariableColor",void 0),t([r(M)],k.prototype,"visualVariableOpacity",void 0),t([r(O)],k.prototype,"visualVariableSizeMinMaxValue",void 0),t([r(C)],k.prototype,"visualVariableSizeScaleStops",void 0),t([r(P)],k.prototype,"visualVariableSizeStops",void 0),t([r(U)],k.prototype,"visualVariableSizeUnitValue",void 0);class q extends k{constructor(){super(...arguments),this.type="OutlineFillShader"}vertex(t,o){return H(this,t,o)}fragment(t){const{color:o,isOutline:i}=t,e=a(i,new l(.5)),r=S(t,this.antialiasingControls.blur),s=p(e,r,o),n=p(e,new l(1/255),new l(0));return this.getFragmentOutput(s,t,n)}hittest(t,o,i){return p(i,V(this.hittestRequest),v(this,t,o))}}t([o(0,s(R)),o(1,s(c))],q.prototype,"vertex",null),t([o(0,s(A))],q.prototype,"fragment",null);export{k as AOutlineFillShader,A as OutlineFillFragmentInput,q as OutlineFillShader,R as OutlineFillVertexInput,H as getOutlineFillVertexData};
