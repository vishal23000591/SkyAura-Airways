/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../../../../chunks/tslib.es6.js";import{uniform as r,UniformGroup as t}from"../../../GraphShaderModule.js";import{step as n,Vec2 as o,Bool as i,texture2D as s,floor as a,fract as m,IVec2 as u,int as p,Vec3 as c,ifElse as d,lessThanEqual as f,texelFetch as l,Int as w,dot as g,Sampler2D as x}from"../../../graph/glsl.js";import{sampleBicubicBSpline as y}from"../bitmapUtils.js";import{oneMinus as b}from"../utils.js";import{sampleBilinear as S}from"./sampleBilinear.js";class j extends t{}function v(e,r){const t=s(r.transformTexture,e);return new o(t.r,t.g)}function z(e,r){const{transformTexture:t,targetImageSize:n,transformSpacing:i}=r,s=a(e.multiply(n)),l=new o(4,1),w=a(s.divide(i)).multiply(l),g=m(s.add(new o(.5,.5)).divide(i)),x=new u(p(w.x),p(w.y)),y=new c(g,1);return d(f(g.x,g.y),h(t,x,y),I(t,x,y))}function h(e,r,t){const n=l(e,r,new w(0)),i=new u(r.x.add(1),r.y),s=l(e,i,new w(0));return new o(g(n.rgb,t),g(s.rgb,t))}function I(e,r,t){const n=new u(r.x.add(2),r.y),i=l(e,n,new w(0)),s=new u(r.x.add(3),r.y),a=l(e,s,new w(0));return new o(g(i.rgb,t),g(a.rgb,t))}function T(e){const r=n(new o(-1e-5,-1e-5),e).multiply(n(e,new o(1.00001,1.00001))),t=b(r.x.multiply(r.y));return new i(t)}function G(e,r,t=!1){return r?t?v(e,r):z(e,r):e}function k(e,r,t){const{bicubic:n=!1,bilinear:o=!1,nearestOnEdge:i=!1}=t??{};return n||o?n?y(r.texture,e,r.srcImageSize):S(r.texture,e,r.srcImageSize,i):s(r.texture,e)}e([r(x)],j.prototype,"transformTexture",void 0),e([r(o)],j.prototype,"targetImageSize",void 0),e([r(o)],j.prototype,"transformSpacing",void 0),e([r(o)],j.prototype,"transformGridSize",void 0);export{j as ProjectionConfig,k as getPixel,G as getPixelLocation,T as isOutside};
