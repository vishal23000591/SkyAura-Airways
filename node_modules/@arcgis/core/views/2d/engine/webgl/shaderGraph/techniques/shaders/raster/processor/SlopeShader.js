/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../../../../../chunks/tslib.es6.js";import{uniform as t,define as o,UniformGroup as i}from"../../../../GraphShaderModule.js";import{pow as r,Vec2 as p,sqrt as s,atan as l,Vec4 as d,Float as u}from"../../../../graph/glsl.js";import{getSurfaceValues as c,computeDeltaZ as m}from"../surface.js";import{BaseRasterProcessorShader as a}from"./BaseRasterProcessorShader.js";import{roundOutput as n}from"./math.js";class h extends i{}e([t(u)],h.prototype,"pixelSizePower",void 0),e([t(u)],h.prototype,"pixelSizeFactor",void 0),e([t(u)],h.prototype,"zFactor",void 0),e([t(p)],h.prototype,"cellSize",void 0);class y extends a{constructor(){super(...arguments),this.type="SlopeShader",this.isOutputRounded=!1,this.percentRise=!1}_process(e){const{cellSize:t,pixelSizePower:o,pixelSizeFactor:i,zFactor:u}=this.slopeConfig,a=r(t,new p(o)).multiply(i).add(u).divide(t.multiply(8)),{texture:h}=this.config,y=c(h,e,this.config.srcImageSize),{x:f,y:S}=m(y,a),x=s(f.multiply(f).add(S.multiply(S))),z=this.percentRise?x.multiply(100):l(x).multiply(57.2957795),v=new d(z,z,z,y[9]);return this.isOutputRounded?n(v):v}}e([o],y.prototype,"isOutputRounded",void 0),e([o],y.prototype,"percentRise",void 0),e([t(h)],y.prototype,"slopeConfig",void 0);export{y as SlopeShader};
