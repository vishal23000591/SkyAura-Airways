/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{neverReached as r}from"../../../../../../core/compilerUtils.js";import{create as o}from"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js";import{create as a}from"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js";import{NormalType as e,NormalAttribute as l}from"./NormalAttribute.glsl.js";import{VertexPositionPassParameters as m,VertexPositionDrawParameters as s}from"./VertexPosition.glsl.js";import{glsl as t}from"../../shaderModules/glsl.js";import{Matrix3DrawUniform as i}from"../../shaderModules/Matrix3DrawUniform.js";import{Matrix3PassUniform as d}from"../../shaderModules/Matrix3PassUniform.js";function c(o,a){switch(a.normalType){case e.Attribute:case e.Compressed:o.include(l,a),o.varyings.add("vNormalWorld","vec3"),o.varyings.add("vNormalView","vec3"),o.vertex.uniforms.add(new i("transformNormalGlobalFromModel",(r=>r.transformNormalGlobalFromModel)),new d("transformNormalViewFromGlobal",(r=>r.transformNormalViewFromGlobal))),o.vertex.code.add(t`void forwardNormal() {
vNormalWorld = transformNormalGlobalFromModel * normalModel();
vNormalView = transformNormalViewFromGlobal * vNormalWorld;
}`);break;case e.ScreenDerivative:o.vertex.code.add(t`void forwardNormal() {}`);break;default:r(a.normalType);case e.COUNT:}}class f extends m{constructor(){super(...arguments),this.transformNormalViewFromGlobal=o()}}class n extends s{constructor(){super(...arguments),this.transformNormalGlobalFromModel=o(),this.toMapSpace=a()}}export{c as VertexNormal,n as VertexNormalDrawParameters,f as VertexNormalPassParameters};
