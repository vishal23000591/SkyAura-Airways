/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{ZEROS as e}from"../../../../core/libs/gl-matrix-2/factories/vec4f64.js";import{isColorOrColorEmission as r}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as i,depthOnlyOutputBuffersOr as s}from"../core/shaderTechnique/ShaderTechnique.js";import{OITPass as l}from"../lib/OITPass.js";import{oitPolygonOffset as o,depthWrite as n,oitDepthTest as a,blending as c,getDrawBuffers as p}from"../lib/OrderIndependentTransparency.js";import{stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as m,stencilWriteMaskOn as d}from"../lib/StencilUtils.js";import{VisualVariablePassParameters as f}from"../materials/VisualVariablePassParameters.js";import{C as h}from"../../../../chunks/ColorMaterial.glsl.js";import{makePipelineState as P,defaultColorWrite as j,cullingParams as g}from"../../../webgl/renderState.js";class b extends f{constructor(){super(...arguments),this.color=e}}class O extends i{constructor(e,r){super(e,r,new t(h,(()=>import("./ColorMaterial.glsl.js"))))}_createPipeline(e,t){const{oitPass:i,output:f,transparent:h,cullFace:b,draped:O,hasOccludees:T,polygonOffset:_}=e,x=i===l.NONE;return P({blending:r(f)&&h?c(i):null,culling:g(b),depthTest:O?null:{func:a(i)},depthWrite:n(e),drawBuffers:s(f,p(i,f)),colorWrite:j,stencilWrite:T?d:null,stencilTest:T?t?u:m:null,polygonOffset:x?_?S:null:o(e)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const S={factor:1,units:1};export{b as ColorMaterialPassParameters,O as ColorMaterialTechnique};
