/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../chunks/tslib.es6.js";import t from"../../../../../Color.js";import o from"../../../../../core/Accessor.js";import{destroyMaybe as r}from"../../../../../core/maybe.js";import{watch as s,initial as i}from"../../../../../core/reactiveUtils.js";import{property as n}from"../../../../../core/accessorSupport/decorators/property.js";import"../../../../../core/has.js";import"../../../../../core/Logger.js";import"../../../../../core/RandomLCG.js";import{subclass as l}from"../../../../../core/accessorSupport/decorators/subclass.js";import{OutlineVisualElement as a}from"../../../interactive/visualElements/OutlineVisualElement.js";import{RenderOccludedFlag as m}from"../../lib/Material.js";let c=class extends o{constructor(e){super(e)}initialize(){this.addHandles([s((()=>this.area.enabled),(()=>this._ensureElement()),i),s((()=>this.area.outline?.color),(e=>this._updateColor(e)),i),s((()=>this.area.geometries),(e=>this._updateGeometries(e)),i)])}destroy(){this.removeAllHandles(),this._outlineElement=r(this._outlineElement)}_ensureElement(){this.area.enabled&&this.area.outline?.color?this._outlineElement??=new a({view:this.view,geometry:this._mergePolygons(this.area.geometries),isDraped:!0,attached:!0,isDecoration:!1,color:t.toUnitRGBA(this.area.outline?.color),renderOccluded:m.OccludeAndTransparent,width:3}):this._outlineElement=r(this._outlineElement)}_updateGeometries(e){this._ensureElement(),this._outlineElement&&(this._outlineElement.geometry=this._mergePolygons(e))}_updateColor(e){this._ensureElement(),this._outlineElement&&e&&(this._outlineElement.color=t.toUnitRGBA(e))}_mergePolygons(e){if(!e||0===e.length)return null;const t=e.at(0).clone();return e.forEach((e=>{t.rings.push(...e.rings)})),t}};e([n({constructOnly:!0})],c.prototype,"view",void 0),e([n({constructOnly:!0})],c.prototype,"area",void 0),c=e([l("esri.views.3d.webgl-engine.effects.focusArea.FocusAreaOutlineItem")],c);export{c as FocusAreaOutlineItem};
