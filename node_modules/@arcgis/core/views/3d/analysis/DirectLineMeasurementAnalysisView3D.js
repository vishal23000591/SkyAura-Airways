/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import e from"../../../core/Accessor.js";import"../../../core/has.js";import{abortMaybe as i,destroyMaybe as s}from"../../../core/maybe.js";import{property as a}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as l}from"../../../core/accessorSupport/decorators/subclass.js";import{getDefaultUnitForView as o}from"../../../support/getDefaultUnitForView.js";import{AnalysisView3D as n}from"./AnalysisView3D.js";import{MeasurementMode as r}from"./interfaces.js";import{DirectLineMeasurementController as u}from"./DirectLineMeasurement/DirectLineMeasurementController.js";import{DirectLineMeasurementVisualization as p}from"./DirectLineMeasurement/DirectLineMeasurementVisualization.js";import y from"../interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool.js";import{connectAnalysisViewToTool as m,removeAnalysisViewTool as h,startPlaceOperation as d}from"../../analysis/analysisViewUtils.js";import{loadGeodesicLengthMeasurementUtils as c}from"../../support/geodesicLengthMeasurementUtils.js";let g=class extends(n(e)){constructor(t){super(t),this.type="direct-line-measurement-view-3d",this.analysis=null,this.tool=null,this.result=null,this.measurementMode=r.Auto,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null,this.userOperation=null}initialize(){const{analysis:t,view:e}=this;this._analysisVisualization=new p({view:e,analysis:t,analysisView:this}),this.addResolvingPromise(c().then((i=>{this.destroyed||(this._analysisController=new u({view:e,analysis:t,viewData:this,geodesicLengthMeasurementUtils:i}))}))),this.addHandles(m(this,y))}destroy(){h(this),this.userOperation=i(this.userOperation),this._analysisController=s(this._analysisController),this._analysisVisualization=s(this._analysisVisualization)}get updating(){return!!this._analysisVisualization?.loadingMessages}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(t){this._analysisVisualization.visualElementOrientation=t}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(t){this._analysisVisualization.allowVisualElementsOrientationChange=t}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(t){this._analysisVisualization.triangleCollapseRatioThreshold=t}get directLabelText(){return this._analysisVisualization.labels.direct?.text??""}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal?.text??""}get verticalLabelText(){return this._analysisVisualization.labels.vertical?.text??""}get unit(){return this.analysis.unit??o(this.view)}get testData(){}place(t){return d(this,{placementOptions:t})}};t([a()],g.prototype,"_analysisVisualization",void 0),t([a()],g.prototype,"_analysisController",void 0),t([a()],g.prototype,"updating",null),t([a({readOnly:!0})],g.prototype,"type",void 0),t([a({constructOnly:!0,nonNullable:!0})],g.prototype,"analysis",void 0),t([a()],g.prototype,"tool",void 0),t([a()],g.prototype,"result",void 0),t([a()],g.prototype,"measurementMode",void 0),t([a()],g.prototype,"elevationAlignedStartPoint",void 0),t([a()],g.prototype,"elevationAlignedEndPoint",void 0),t([a({readOnly:!0})],g.prototype,"viewMode",null),t([a({readOnly:!0})],g.prototype,"actualVisualizedMeasurement",null),t([a()],g.prototype,"visualElementOrientation",null),t([a()],g.prototype,"allowVisualElementsOrientationChange",null),t([a()],g.prototype,"triangleCollapseRatioThreshold",null),t([a({readOnly:!0})],g.prototype,"directLabelText",null),t([a({readOnly:!0})],g.prototype,"horizontalLabelText",null),t([a({readOnly:!0})],g.prototype,"verticalLabelText",null),t([a()],g.prototype,"unit",null),t([a()],g.prototype,"userOperation",void 0),g=t([l("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],g);const v=g;export{v as default};
